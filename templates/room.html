{% extends "base.html" %}
{% block title %}{{ room.topic }}{% endblock %}
{% block content %}
<h1>{{ room.topic }}</h1>
    {% if g.user %}
      <div class="chat pure-u-1 pure-u-md-1-3" room-id="{{ room.id }}">
        <ul id="messages"></ul> {# where messages go! #}
          {# and a form to send them #}
        <form class="pure-form chat-input" action="" id="chat">
          <input type="hidden" id="uname" name="username" value="{{ g.user.username }}">
          <input type="hidden" id="r_id" name="r_id" value="{{ room.id }}">
          <label for="m">Message:</label>
          <input type="text" id="m" name="m" autocomplete="off">
          <button class="pure-button pure-button-primary">Send</button>
        </form>
      </div>
      <div class="chat-users pure-u-1 pure-u-md-1-3">
        Users:
        <ul id="userlist"></ul> {# where users go #}
      </div>
      <div id="get-display pure-u-1 pure-u-md-1-3">
        <form class="pure-form get-display" action="">
          <label for="display">Display Name:</label>
          <input type="text" id="display" name="display" autocomplete="off">
          <button class="pure-button pure-button-primary">Start Chatting</button>
        </form>
      </div>
    {% else %}
       <h2>Login to chat!</h2>
    {% endif %}
  {# import socket.io client library #}
  <script src="https://cdn.jsdelivr.net/socket.io-client/1.3.2/socket.io.min.js"></script>
  {# import JavaScript #}
  <script src="{{ url_for('static', filename='chat.js') }}" async></script>
{% endblock %}